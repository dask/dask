# This job includes coverage
name: test-environment
channels:
  - conda-forge
dependencies:
  # required dependencies
  - python=3.14
  - packaging
  - pyyaml
  - click
  - cloudpickle
  - partd
  - fsspec
  - toolz
  # test dependencies
  - pre-commit
  - pytest
  - pytest-cov
  - pytest-mock
  - pytest-rerunfailures
  - pytest-timeout
  - pytest-xdist
  - moto<5
  # Optional dependencies
  - mimesis
  - numpy>=2.2  # only tested here
  - pandas
  # - numba  # for py 3.14 solve
  - flask
  - h5py
  # Temporarily removing to allow `numpy >=2` to be installed
  # - pytables
  - zarr
  # `tiledb-py=0.17.5` lead to strange seg faults in CI, However 0.18 is needed for 3.11
  # https://github.com/dask/dask/pull/9569
  # - tiledb-py # crashes on Python 3.11
  # - pyspark
  # - tiledb # crashes on Python 3.11
  - xarray
  # - sqlalchemy  # for py 3.14 solve
  - pyarrow>=14.0.1
  - coverage
  - jsonschema
  # other -- IO
  - boto3
  - botocore
  - bokeh
  - httpretty
  - aiohttp
  - s3fs>=2021.9.0
  # - crick  # for py 3.14 solve
  # - cytoolz  # for py 3.14 solve
  # - distributed  # for py 3.14 solve
  - ipython
  - ipycytoscape
  # until https://github.com/jupyter-widgets/ipywidgets/issues/3731 is fixed
  - ipywidgets<8.0.5
  - ipykernel<6.22.0
  - lz4
  - psutil
  - requests
  - scikit-image
  # - scikit-learn  # for py 3.14 solve
  - scipy
  - python-snappy
  # - sparse  # for py 3.14 solve
  - cachey
  - python-graphviz
  # - python-cityhash  # for py 3.14 solve
  - python-xxhash
  - mmh3
  - jinja2
  - pip
  - pip:
    - git+https://github.com/dask/distributed
